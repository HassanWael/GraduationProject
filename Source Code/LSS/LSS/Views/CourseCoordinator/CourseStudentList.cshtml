@model PagedList.IPagedList<LSS.Models.EnroledStudent>
@Styles.Render("~/Content/css")
@Scripts.Render("~/bundles/modernizr")
@using PagedList.Mvc;


<head>
    @{
        ViewBag.Title = "Enroled Students";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
</head>

<body>
    <div class="row">
        <div class="col-2 mt-lg-5">
            <div class="list-group list-group-flush w-50">
                <h4 class="text-primary text-decoration-none" style="color:black !important"> <b>Content</b> </h4>
                @Html.ActionLink("Recomandations for improving the course", "ActionsForImproving", "CourseCoordinator", new { ViewBag.courseID }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })

                @Html.ActionLink("Students List", "CourseStudentList", "CourseCoordinator", new { ViewBag.courseID, ViewBag.Year, ViewBag.Semseter }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info active" })

                @Html.ActionLink("PI Assessment", "PI Assessment", "CourseCoordinator", new { ViewBag.courseID, ViewBag.Year, ViewBag.Semseter }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })

                @Html.ActionLink("Survey", "CourseAssessmentSurvey", "CourseCoordinator", new { ViewBag.courseID, ViewBag.Year, ViewBag.Semseter }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })
                <br />
                <h4 class="text-primary text-decoration-none" style="color:black !important"> <b>Forms</b> </h4>
                @Html.ActionLink("Coures Syllabus", "CourseSyllabus", "Forms", new { ViewBag.courseID }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })
                @Html.ActionLink("Course Assessment Survey", "CourseAssessmentSurvey", "Forms", new { ViewBag.courseID }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })
                @Html.ActionLink("Course File Checklist", "CourseFileChecklist", "Forms", new { ViewBag.courseID }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })
                @Html.ActionLink("Course Information Form", "CourseInformationForm", "Forms", new { ViewBag.courseID }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })
                @Html.ActionLink("Coures Report", "CourseReport", "Forms", new { ViewBag.courseID }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })
                @Html.ActionLink("Exam Evaluation", "ExamEvaluation", "Forms", new { ViewBag.courseID }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })
                @Html.ActionLink("Question Answer Sheet", "QuestionsAnswersSheet", "Forms", new { ViewBag.courseID }, new { @class = "list-group-item list-group-item-flush bg-transparent border-info" })
            </div>
        </div>

        <div class="col-lg-8">
            <div class="contrainer shadow-lg p-3 mb-3 mt-5 align-content-center bg-white">
                <div class="d-flex justify-content-center">
                    <div>
                        <img src="~/Images/LOGO-removebg-preview.png" class="brand_logo" alt="Logo" style="height:150px; width:120px;" />
                        <h4>Students Data</h4>
                    </div>
                </div>

                <div class="shadow block">
                    <div class="block-item w-100">
                        <table class="table table-hover pl-1 table-borderless">
                            <tr class="d-flex justify-content-center">
                                @using (Html.BeginForm("CourseStudentList", "CourseCoordinator", FormMethod.Get))
                                {
                                    <td class="d-inline-flex ml-1">
                                        @Html.TextBox("Search", null, new { @class = "form-control", placeholder = "Student ID" })
                                        <input type="submit" value="search" class="btn btn-primary ml-1" />
                                    </td>
                                }
                            </tr>
                        </table>

                        <table class="table table-hover pl-1 align-content-center justify-content-center">
                            <tr>
                                <th>
                                    @Html.DisplayName("Name")
                                </th>
                                <th>
                                    @Html.DisplayName("Department")
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Student.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Student.Department.Name)
                                    </td>
                                    <td>
                                        @Html.ActionLink("Remove", "RemoveStudentFromCourse", new { StudetnID = item.Student.ID, CourseID = ViewBag.CourseID, Year = ViewBag.Year, Semseter = ViewBag.Semester })
                                    </td>
                                </tr>
                            }
                        </table>
                    </div>
                </div>

                <br />
                <hr style="border-color:red; margin-bottom:3rem; width:70%" />


                <div class="card-group justify-content-center">
                    <div class="block-item h-100 w-100">
                        <div class="card border-primary">
                            <div class="card-header">Add Students From Excel </div>
                            <div class="card-body">

                                @Html.PagedListPager(Model, page => Url.Action("ListStudents",
                               new { Search = ViewBag.Search, page, pageSize = Model.PageSize }),
                               new PagedListRenderOptions
                                    {
                                     ContainerDivClasses = new[] { "pagination pagination-sm" },
                                     UlElementClasses = new[] { "pagination pagination-sm" },
                                     LiElementClasses = new[] { "page-item", "btn-outline-primary" }
                                     })

                                @using (Html.BeginForm("AddStudentListToCourse", "CourseCoordinator", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                {
                                    <input type="hidden" id="CourseID" name="CourseID" value='@ViewBag.CourseID' />
                                    <input type="hidden" id="Year" name="Year" value='@ViewBag.Year' />
                                    <input type="hidden" id="Semseter" name="Semseter" value='@ViewBag.Semester' />


                                    <div class="input-group mb-3">
                                        <div class="custom-file">
                                            <input type="file" class="custom-file-input" id="UploadFileExcel" name="Select Excel File" />
                                            <label class="custom-file-label" for="UploadFileExcel">Choose file..</label>
                                        </div>
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button" id="UploadFile">Upload</button>
                                        </div>
                                    </div>

                                }
                                <hr />
                                <h6><b> the header for the Excel File </b></h6>
                                <img src="~/Images/Excel Format/CourseListExample.png" style="max-width: 100%;  max-height: 100%;  display: block;" />
                            </div>
                        </div>

                        <br />
                        <hr style="border-color:red; margin-bottom:3rem; width:70%" />


                        <div class="card border-primary">
                            <div class="card-header">Upload Final Grades  </div>
                            <div class="card-body">
                                @using (Html.BeginForm("UploadGrades", "CourseCoordinator", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                {
                                    <input type="hidden" id="CourseID" name="CourseID" value='@ViewBag.CourseID' />
                                    <input type="hidden" id="Year" name="Year" value='@ViewBag.Year' />
                                    <input type="hidden" id="Semseter" name="Semseter" value='@ViewBag.Semester' />
                                    <table>
                                        <tr>



                                            <div class="input-group mb-3">
                                                <div class="custom-file">
                                                    <input type="file" class="custom-file-input" id="UploadGrades" name="Select Grades File" />
                                                    <label class="custom-file-label" for="UploadGrades">Choose file..</label>
                                                </div>
                                                <div class="input-group-append">
                                                    <button class="btn btn-primary" type="button" id="UploadFile">Upload</button>
                                                </div>
                                            </div>
                                        </tr>
                                    </table>
                                }
                                <hr />
                                <h6><b> the header for the Excel File </b></h6>
                                <img src="~/Images/Excel Format/StudetnGradeImage.png" style="max-width: 100%;  max-height: 100%;  display: block;" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <script>
            $('#UploadFileExcel').on('change', function () {
                //get the file name
                var fileName = $(this).val();
                //replace the "Choose a file" label
                $(this).next('.custom-file-label').html(fileName);
            })

            $('#UploadGrades').on('change', function () {
                //get the file name
                var fileName = $(this).val();
                //replace the "Choose a file" label
                $(this).next('.custom-file-label').html(fileName);
            })
        </script>
</body>














