@using LSS.Models
@model LSS.Models.Department
@using LSS.Models.DepartmentViewModel

<head>
    @{
        ViewBag.Title = Model.Name;
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
</head>

<script>
    $(function () {
        var PlaceHolderElement = $('#PlaceHolderHere');
        $('button[data-toggle="ajax-model"]').click(function (event) {
            var url = $this(this).data('url');
            var decodedURL = decodeURIComponent(url);
            $.get(url).done(function (data) {
                PlaceHolderElement.html(data);
                PlaceHolderElement.find('modal').modal('show');
            })
        })

        PlaceHolderElement.on('click', '[data-save="modal"]', function (event) {
            var form = $(this).parent('.modal').find('form');
            var actionUrl = form.attr('action');
            var sendData = form.serialize();
            $.post(actionUrl, sendData).done(function (data) {
                PlaceHolderElement.find(',modal').modal('hide');
            })
        }
})



    $(function () {
        var PlaceHolderElement = $('#PlaceHolderHere');
        $('button[data-toggle="ajax-model"]').click(function (event) {
            var url = $this(this).data('url');
            var decodedURL = decodeURIComponent(url);
            $.get(url).done(function (data) {
                PlaceHolderElement.html(data);
                PlaceHolderElement.find('modal').modal('show');
            })
        })

        PlaceHolderElement.on('click', '[data-save="modal"]', function (event) {
            var form = $(this).parent('.modal').find('form');
            var actionUrl = form.attr('action');
            var sendData = form.serialize();
            $.post(actionUrl, sendData).done(function (data) {
                PlaceHolderElement.find(',modal').modal('hide');
            })
        }
})
</script>

<body class="container">
    <div class="shadow-lg mb-3 mt-5 align-content-center bg-white">
        <div class="d-flex justify-content-center align-items-center text-center">
            <div class="mt-2">
                <img src="~/Images/LOGO-removebg-preview.png" class="brand_logo" alt="Logo" style="height:150px; width:120px;" />
                <h2>@Model.Name</h2>
            </div>
        </div>

        <div class="container shadow-sm">
            <h4 class="pt-2">Department Informatin</h4>
            <hr style="border-color:red;" class="align-items-start" />
            <dl class="dl-horizontal">
                <dt>
                    @Html.DisplayNameFor(model => model.Name)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.Name)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model.FacultyId)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.FacultyId)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model.HeadOFDepartment)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.HeadOFDepartment)
                </dd>
            </dl>

            <div>
                <h2>
                    Program Educational Opjectives (PEO)
                </h2>
                @if (Model.PEOs != null)
                {
                    <ul>
                        @foreach (PEO peo in Model.PEOs)
                        {
                            <li>
                                <h5>
                                    <b> @peo.ID : </b>
                                </h5>
                                <p>
                                    @peo.Desc
                                </p>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <h3> There is'nt any PEO yet. </h3>
                }
            </div>

            <div id="addPEO" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        @{
                            Html.RenderPartial("AddPEO", new PEO(Model.ID));
                        }
                    </div>
                </div>
            </div>
            <button class="btn btn-outline-primary mb-3" id='open' data-toggle="modal" data-target="#addPEO">Add PEO</button>
        </div>



        <hr style="border-color:red;" class="align-items-start mt-3" />



        <div class="container shadow-sm">
            <h2 class="pt-2">Student Learning Outcome (SLO)</h2>
            <div>
                <table class="table table-hover">
                    @foreach (SLO slo in Model.SLOes)
                    {
                        <tr>
                            <td>
                                <div>
                                    <h5 class="text-left pr-1"><b>@slo.SLOID</b></h5>
                                    <p> @slo.Desc </p>
                                </div>
                            </td>

                            <td class="text-white">
                                <a class="btn btn-primary"  id="open" data-toggle="modal" data-target="#@slo.SLOID">Edit</a>
                                <a class="btn btn-primary"  id="open" data-toggle="modal" data-target="#PI_@slo.SLOID">Add PI </a>

                                <div id="PI_@slo.SLOID" class="modal fade" tabindex="-1" role="dialog">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            @{
                                                Html.RenderPartial("AddPI", new PI(slo.SLOID, Model.ID));
                                            }
                                        </div>
                                    </div>
                                </div>


                                <div id="@slo.SLOID" class="modal fade" tabindex="-1" role="dialog">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            @{
                                                Html.RenderPartial("EditSLO", new AddSLOMV(slo));
                                            }
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>


                        <tr>
                            <td colspan=" 2">
                                @foreach (PI pi in slo.PIs)
                                {

                                    <h6><b>@pi.ID : </b></h6>
                                    <p> @pi.Desc</p>
                                }
                            </td>
                        </tr>
                    }
                </table>

                <div id="addSLO" class="modal fade" tabindex="-1" role="dialog">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            @{
                                Html.RenderPartial("AddSLO", new AddSLOMV(Model.ID));
                            }
                        </div>
                    </div>
                </div>
                <button class="btn btn-outline-primary mb-3" id='open' data-toggle="modal" data-target="#addSLO">Add SLO</button>
            </div>
        </div>

        <hr style="border-color:red;" class="align-items-start mt-3" />

        <div class="container shadow-sm mt-3">
            <h2 class="text-center">PEO-SLO</h2>
            <div>
                @{ Html.RenderPartial("_PEO_SLO_Mapping", new MappedPEO_SLO(Model)); }
            </div>
        </div>
    </div>
</body>
